<html lang="en" class="js csstransforms3d supports csstransforms3d"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="description" content="kubesec.io">
<meta name="author" content="control-plane.io">

    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/images/favicon/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/favicon/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/favicon/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/favicon/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/images/favicon/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/favicon/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="/images/favicon/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/favicon/apple-touch-icon-152x152.png">
<link rel="icon" type="image/png" href="/images/favicon/favicon-196x196.png" sizes="196x196">
<link rel="icon" type="image/png" href="/images/favicon/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/images/favicon/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/images/favicon/favicon-128.png" sizes="128x128">
<meta name="application-name" content="&nbsp;">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="/images/favicon/mstile-144x144.png">
<meta name="msapplication-square70x70logo" content="/images/favicon/mstile-70x70.png">
<meta name="msapplication-square150x150logo" content="/images/favicon/mstile-150x150.png">
<meta name="msapplication-wide310x150logo" content="/images/favicon/mstile-310x150.png">
<meta name="msapplication-square310x310logo" content="/images/favicon/mstile-310x310.png">

    <title>kubesec.io :: kubesec.io</title>

    
    <link href="/css/nucleus.css?1660740813" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1660740813" rel="stylesheet">
    <link href="/css/hybrid.css?1660740813" rel="stylesheet">
    <link href="/css/featherlight.min.css?1660740813" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1660740813" rel="stylesheet">
    <link href="/css/auto-complete.css?1660740813" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1660740813" rel="stylesheet">
    <link href="/css/theme.css?1660740813" rel="stylesheet">
    <link href="/css/tabs.css?1660740813" rel="stylesheet">
    <link href="/css/hugo-theme.css?1660740813" rel="stylesheet">
    
    <link href="/css/theme-red.css?1660740813" rel="stylesheet">
    
    

    <script type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js?id=G-EVED2RKE2Q&amp;cx=c&amp;_slc=1"></script><script async="" src="https://www.google-analytics.com/analytics.js"></script><script src="/js/jquery-3.3.1.min.js?1660740813"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
    <img src="/images/kubesec-io.png">

    </a><a href="https://control-plane.io"><small style="color: black;">from <strong>control</strong>plane</small></a>


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input="" id="search-by" type="search" placeholder="Search..." autocomplete="off">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1660740813"></script>
<script type="text/javascript" src="/js/auto-complete.js?1660740813"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1660740813"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href="/"><i class="fas fa-home"></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable ps-container ps-theme-default ps-active-x ps-active-y" data-ps-id="be005fa2-7efa-fb16-1d40-8f0fcf6bc8b1" style="height: 556.633px;">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/basics/" title="index" class="dd-item
        
        
        parent
        ">
      <a href="/basics/">
          <b># </b>index
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-resources-limits-cpu/" title="containers[] .resources .limits .cpu" class="dd-item ">
        <a href="/basics/containers-resources-limits-cpu/">
        containers[] .resources .limits .cpu
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-resources-limits-memory/" title="containers[] .resources .limits .memory" class="dd-item ">
        <a href="/basics/containers-resources-limits-memory/">
        containers[] .resources .limits .memory
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-resources-requests-cpu/" title="containers[] .resources .requests .cpu" class="dd-item ">
        <a href="/basics/containers-resources-requests-cpu/">
        containers[] .resources .requests .cpu
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-resources-requests-memory/" title="containers[] .resources .requests .memory" class="dd-item ">
        <a href="/basics/containers-resources-requests-memory/">
        containers[] .resources .requests .memory
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-securitycontext-capabilities-add-index-sys-admin/" title="containers[] .securityContext .capabilities .add | index(&quot;SYS_ADMIN&quot;)" class="dd-item ">
        <a href="/basics/containers-securitycontext-capabilities-add-index-sys-admin/">
        containers[] .securityContext .capabilities .add | index("SYS_ADMIN")
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-securitycontext-capabilities-drop-index-all/" title="containers[] .securityContext .capabilities .drop | index(&quot;ALL&quot;)" class="dd-item ">
        <a href="/basics/containers-securitycontext-capabilities-drop-index-all/">
        containers[] .securityContext .capabilities .drop | index("ALL")
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-securitycontext-privileged-true/" title="containers[] .securityContext .privileged == true" class="dd-item ">
        <a href="/basics/containers-securitycontext-privileged-true/">
        containers[] .securityContext .privileged == true
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-securitycontext-readonlyrootfilesystem-true/" title="containers[] .securityContext .readOnlyRootFilesystem == true" class="dd-item ">
        <a href="/basics/containers-securitycontext-readonlyrootfilesystem-true/">
        containers[] .securityContext .readOnlyRootFilesystem == true
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-securitycontext-runasnonroot-true/" title="containers[] .securityContext .runAsNonRoot == true" class="dd-item ">
        <a href="/basics/containers-securitycontext-runasnonroot-true/">
        containers[] .securityContext .runAsNonRoot == true
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/containers-securitycontext-runasuser/" title="containers[] .securityContext .runAsUser > 10000" class="dd-item ">
        <a href="/basics/containers-securitycontext-runasuser/">
        containers[] .securityContext .runAsUser &gt; 10000
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/securitycontext-capabilities/" title="securityContext capabilities" class="dd-item ">
        <a href="/basics/securitycontext-capabilities/">
        securityContext capabilities
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/service-accounts/" title="Service Accounts" class="dd-item ">
        <a href="/basics/service-accounts/">
        Service Accounts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/metadata-annotations-container-apparmor-security-beta-kubernetes-io-nginx/" title=".metadata .annotations .&quot;container.apparmor.security.beta.kubernetes.io/nginx&quot;" class="dd-item ">
        <a href="/basics/metadata-annotations-container-apparmor-security-beta-kubernetes-io-nginx/">
        .metadata .annotations ."container.apparmor.security.beta.kubernetes.io/nginx"
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/metadata-annotations-container-seccomp-security-alpha-kubernetes-io-pod/" title=".metadata .annotations .&quot;container.seccomp.security.alpha.kubernetes.io/pod&quot;" class="dd-item ">
        <a href="/basics/metadata-annotations-container-seccomp-security-alpha-kubernetes-io-pod/">
        .metadata .annotations ."container.seccomp.security.alpha.kubernetes.io/pod"
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/metadata-annotations-seccomp-security-alpha-kubernetes-io-pod/" title=".metadata .annotations .&quot;seccomp.security.alpha.kubernetes.io/pod&quot;" class="dd-item ">
        <a href="/basics/metadata-annotations-seccomp-security-alpha-kubernetes-io-pod/">
        .metadata .annotations ."seccomp.security.alpha.kubernetes.io/pod"
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-hostaliases/" title=".spec .hostAliases" class="dd-item ">
        <a href="/basics/spec-hostaliases/">
        .spec .hostAliases
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-hostipc/" title=".spec .hostIPC" class="dd-item ">
        <a href="/basics/spec-hostipc/">
        .spec .hostIPC
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-hostnetwork/" title=".spec .hostNetwork" class="dd-item ">
        <a href="/basics/spec-hostnetwork/">
        .spec .hostNetwork
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-hostpid/" title=".spec .hostPID" class="dd-item ">
        <a href="/basics/spec-hostpid/">
        .spec .hostPID
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-volumeclaimtemplates-spec-accessmodes-index-readwriteonce/" title=".spec .volumeClaimTemplates[] .spec .accessModes | index(&quot;ReadWriteOnce&quot;)" class="dd-item ">
        <a href="/basics/spec-volumeclaimtemplates-spec-accessmodes-index-readwriteonce/">
        .spec .volumeClaimTemplates[] .spec .accessModes | index("ReadWriteOnce")
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-volumeclaimtemplates-spec-resources-requests-storage/" title=".spec .volumeClaimTemplates[] .spec .resources .requests .storage" class="dd-item ">
        <a href="/basics/spec-volumeclaimtemplates-spec-resources-requests-storage/">
        .spec .volumeClaimTemplates[] .spec .resources .requests .storage
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/basics/spec-volumes-hostpath-path-var-run-docker-sock/" title=".spec .volumes[] .hostPath .path == &quot;/var/run/docker.sock&quot;" class="dd-item ">
        <a href="/basics/spec-volumes-hostpath-path-var-run-docker-sock/">
        .spec .volumes[] .hostPath .path == "/var/run/docker.sock"
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://twitter.com/controlplaneio"><i class="fa fa-twitter"></i> Twitter</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      
    


    </section>
  <div class="ps-scrollbar-x-rail" style="width: 300px; left: 0px; bottom: 0px;"><div class="ps-scrollbar-x" tabindex="0" style="left: 0px; width: 249px;"></div></div><div class="ps-scrollbar-y-rail" style="top: 0px; right: 0px; height: 557px;"><div class="ps-scrollbar-y" tabindex="0" style="top: 0px; height: 212px;"></div></div></div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
        <div id="head-tags">
        
        </div>
        
          <div id="chapter">
        
        <div id="body-inner">
          

        

<span id="sidebar-toggle-span">
<a href="#" id="sidebar-toggle" data-sidebar-toggle="" class="highlight"><i class="fas fa-bars"></i> navigation</a>
</span>

 
<h1 id="kubesecio----v2">kubesec.io â€“ v2</h1>
<h4 id="center-v1-api-is-deprecated-please-read-the-a-hrefhttpsgithubcomcontrolplaneiokubesecblobmasterreadmemdrelease-notes-target_blankrelease-notesa-center"><!-- raw HTML omitted -->ðŸš¨ v1 API is deprecated, please read the <!-- raw HTML omitted -->release notes<!-- raw HTML omitted --> ðŸš¨<!-- raw HTML omitted --> <span class="anchor" data-clipboard-text="https://kubesec.io/#center-v1-api-is-deprecated-please-read-the-a-hrefhttpsgithubcomcontrolplaneiokubesecblobmasterreadmemdrelease-notes-target_blankrelease-notesa-center"><i class="fas fa-link fa-lg"></i></span></h4>
<h3 id="security-risk-analysis-for-kubernetes-resources">Security risk analysis for Kubernetes resources <span class="anchor" data-clipboard-text="https://kubesec.io/#security-risk-analysis-for-kubernetes-resources"><i class="fas fa-link fa-lg"></i></span></h3>
<p><a href="https://casual-hosting.s3.amazonaws.com/kubesec-logo.png" data-featherlight="image"><img src="https://casual-hosting.s3.amazonaws.com/kubesec-logo.png" alt="" style="width: auto; height: auto;"></a></p>
<h2 id="live-demo">Live Demo <span class="anchor" data-clipboard-text="https://kubesec.io/#live-demo"><i class="fas fa-link fa-lg"></i></span></h2>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>This uses ControlPlaneâ€™s hosted API at <a href="https://v2.kubesec.io/scan" class="highlight">v2.kubesec.io/scan</a></p>
<hr>
<h2 id="download-kubesec">Download Kubesec <span class="anchor" data-clipboard-text="https://kubesec.io/#download-kubesec"><i class="fas fa-link fa-lg"></i></span></h2>
<p>Kubesec is <a href="https://github.com/controlplaneio/kubesec" class="highlight">open source</a> and available as a:</p>
<ul>
<li><a href="https://hub.docker.com/r/kubesec/kubesec/tags" class="highlight">Docker container image</a> at <code>docker.io/kubesec/kubesec:v2</code><span class="copy-to-clipboard" title="Copy to clipboard"></span></li>
<li>Linux/MacOS/Win binary (get the <a href="https://github.com/controlplaneio/kubesec/releases" class="highlight">latest release</a>)</li>
<li><a href="https://github.com/stefanprodan/kubesec-webhook" class="highlight">Kubernetes Admission Controller</a></li>
<li><a href="https://github.com/stefanprodan/kubectl-kubesec" class="highlight">Kubectl plugin</a></li>
</ul>
<h4 id="command-line-usage">Command line usage: <span class="anchor" data-clipboard-text="https://kubesec.io/#command-line-usage"><i class="fas fa-link fa-lg"></i></span></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ kubesec scan k8s-deployment.yaml</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<h4 id="usage-example">Usage example: <span class="anchor" data-clipboard-text="https://kubesec.io/#usage-example"><i class="fas fa-link fa-lg"></i></span></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ cat <span style="color:#e6db74">&lt;&lt;EOF &gt; kubesec-test.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: kubesec-demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: kubesec-demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: gcr.io/google-samples/node-hello:1.0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    securityContext:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      readOnlyRootFilesystem: <span class="hljs-literal">true</span>
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>$ kubesec scan kubesec-test.yaml</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<h4 id="docker-usage">Docker usage: <span class="anchor" data-clipboard-text="https://kubesec.io/#docker-usage"><i class="fas fa-link fa-lg"></i></span></h4>
<p>Run the same command in Docker:
</p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ docker run -i kubesec/kubesec:512c5e0 scan /dev/stdin &lt; kubesec-test.yaml</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p></p>
<h2 id="kubesec-http-server">Kubesec HTTP Server <span class="anchor" data-clipboard-text="https://kubesec.io/#kubesec-http-server"><i class="fas fa-link fa-lg"></i></span></h2>
<p>Kubesec includes a bundled HTTP server</p>
<h4 id="cli-usage-example">CLI usage example: <span class="anchor" data-clipboard-text="https://kubesec.io/#cli-usage-example"><i class="fas fa-link fa-lg"></i></span></h4>
<p>Start the HTTP server in the background</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ kubesec http <span style="color:#ae81ff">8080</span> &amp;
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#ae81ff">12345</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span><span style="color:#e6db74"><span class="hljs-string">"severity"</span></span>:<span style="color:#e6db74"><span class="hljs-string">"info"</span></span>,<span style="color:#e6db74"><span class="hljs-string">"timestamp"</span></span>:<span style="color:#e6db74"><span class="hljs-string">"2019-05-12T11:58:34.662+0100"</span></span>,<span style="color:#e6db74"><span class="hljs-string">"caller"</span></span>:<span style="color:#e6db74"><span class="hljs-string">"server/server.go:69"</span></span>,<span style="color:#e6db74"><span class="hljs-string">"message"</span></span>:<span style="color:#e6db74"><span class="hljs-string">"Starting HTTP server on port 8080"</span></span><span style="color:#f92672">}</span></span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<p>Use curl to POST a file to the server</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ curl -sSX POST --data-binary @<span class="hljs-built_in">test</span>/asset/score-0-cap-sys-admin.yml http://localhost:8080/scan
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74"><span class="hljs-string">"object"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"Pod/security-context-demo.default"</span></span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74"><span class="hljs-string">"valid"</span></span>: <span class="hljs-literal">true</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74"><span class="hljs-string">"message"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"Failed with a score of -30 points"</span></span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74"><span class="hljs-string">"score"</span></span>: -30,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74"><span class="hljs-string">"scoring"</span></span>: <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74"><span class="hljs-string">"critical"</span></span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74"><span class="hljs-string">"selector"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"containers[] .securityContext .capabilities .add == SYS_ADMIN"</span></span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74"><span class="hljs-string">"reason"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"CAP_SYS_ADMIN is the most privileged capability and should always be avoided"</span></span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74"><span class="hljs-string">"selector"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"containers[] .securityContext .runAsNonRoot == true"</span></span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74"><span class="hljs-string">"reason"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"Force the running image to run as a non-root user to ensure least privilege"</span></span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  // ...</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<p>Finally, stop the Kubesec server by killing the background process
</p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ <span class="hljs-built_in">kill</span> %</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p></p>
<h4 id="docker-usage-example">Docker usage example: <span class="anchor" data-clipboard-text="https://kubesec.io/#docker-usage-example"><i class="fas fa-link fa-lg"></i></span></h4>
<p>Start the HTTP server using Docker</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ docker run -d -p 8080:8080 kubesec/kubesec:512c5e0 http <span style="color:#ae81ff">8080</span></span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<p>Use curl to POST a file to the server</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ curl -sSX POST --data-binary @<span class="hljs-built_in">test</span>/asset/score-0-cap-sys-admin.yml http://localhost:8080/scan
</span></span><span style="display:flex;"><span>...</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<p>Donâ€™t forget to stop the server.</p>
<h2 id="kubesec-as-a-service">Kubesec-as-a-Service <span class="anchor" data-clipboard-text="https://kubesec.io/#kubesec-as-a-service"><i class="fas fa-link fa-lg"></i></span></h2>
<p>Kubesec is also available via HTTPS at <a href="https://v2.kubesec.io/scan" class="highlight">v2.kubesec.io/scan</a></p>
<h4 id="command-line-usage-1">Command line usage: <span class="anchor" data-clipboard-text="https://kubesec.io/#command-line-usage-1"><i class="fas fa-link fa-lg"></i></span></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ curl -sSX POST --data-binary @<span style="color:#e6db74"><span class="hljs-string">"k8s-deployment.yaml"</span></span> https://v2.kubesec.io/scan</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<h4 id="usage-example-1">Usage example: <span class="anchor" data-clipboard-text="https://kubesec.io/#usage-example-1"><i class="fas fa-link fa-lg"></i></span></h4>
<p>Define a BASH function</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ <span class="hljs-function"><span class="hljs-title">kubesec</span></span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span class="hljs-built_in">local</span> FILE<span style="color:#f92672">=</span><span style="color:#e6db74"><span class="hljs-string">"</span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">${</span></span></span><span class="hljs-string"><span class="hljs-variable">1</span></span><span style="color:#66d9ef"><span class="hljs-string"><span class="hljs-variable">:-</span></span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">}</span></span></span><span style="color:#e6db74"><span class="hljs-string">"</span></span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">[[</span> ! -e <span style="color:#e6db74"><span class="hljs-string">"</span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">${</span></span></span><span class="hljs-string"><span class="hljs-variable">FILE</span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">}</span></span></span><span style="color:#e6db74"><span class="hljs-string">"</span></span> <span style="color:#f92672">]]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span class="hljs-built_in">echo</span> <span style="color:#e6db74"><span class="hljs-string">"kubesec: </span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">${</span></span></span><span class="hljs-string"><span class="hljs-variable">FILE</span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">}</span></span></span><span style="color:#e6db74"><span class="hljs-string">: No such file"</span></span> &gt;&amp;2;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef"><span class="hljs-built_in">return</span></span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>;
</span></span><span style="display:flex;"><span>    curl --silent <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --compressed <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --connect-timeout <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      -sSX POST <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      --data-binary<span style="color:#f92672">=</span>@<span style="color:#e6db74"><span class="hljs-string">"</span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">${</span></span></span><span class="hljs-string"><span class="hljs-variable">FILE</span></span><span style="color:#e6db74"><span class="hljs-string"><span class="hljs-variable">}</span></span></span><span style="color:#e6db74"><span class="hljs-string">"</span></span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>      https://v2.kubesec.io/scan
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<p>POST a Kubernetes resource to v2.kubesec.io/scan
</p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ kubesec ./deployment.yml</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p></p>
<p>Return non-zero status code is the score is not greater than 10
</p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash hljs" data-lang="bash"><span style="display:flex;"><span>$ kubesec ./score-9-deployment.yml | jq --<span class="hljs-built_in">exit</span>-status <span style="color:#e6db74"><span class="hljs-string">'.score &gt; 10'</span></span> &gt;/dev/null
</span></span><span style="display:flex;"><span><span style="color:#75715e"><span class="hljs-comment"># status code 1</span></span></span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div><p></p>
<h2 id="example-output">Example output <span class="anchor" data-clipboard-text="https://kubesec.io/#example-output"><i class="fas fa-link fa-lg"></i></span></h2>
<p>Kubesec returns a returns a JSON array, and can scan multiple YAML documents in a single input file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json hljs" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672"><span class="hljs-attr">"object"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"Pod/security-context-demo.default"</span></span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672"><span class="hljs-attr">"valid"</span></span>: <span style="color:#66d9ef"><span class="hljs-literal">true</span></span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672"><span class="hljs-attr">"message"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"Failed with a score of -30 points"</span></span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672"><span class="hljs-attr">"score"</span></span>: <span style="color:#ae81ff"><span class="hljs-number">-30</span></span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672"><span class="hljs-attr">"scoring"</span></span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672"><span class="hljs-attr">"critical"</span></span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672"><span class="hljs-attr">"selector"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"containers[] .securityContext .capabilities .add == SYS_ADMIN"</span></span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672"><span class="hljs-attr">"reason"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"CAP_SYS_ADMIN is the most privileged capability and should always be avoided"</span></span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672"><span class="hljs-attr">"advise"</span></span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672"><span class="hljs-attr">"selector"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"containers[] .securityContext .runAsNonRoot == true"</span></span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672"><span class="hljs-attr">"reason"</span></span>: <span style="color:#e6db74"><span class="hljs-string">"Force the running image to run as a non-root user to ensure least privilege"</span></span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#75715e"><span class="hljs-comment">// ...</span>
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]</span></span></code><span class="copy-to-clipboard" title="Copy to clipboard"></span></pre></div>
<hr>
	
  
        
            </div> 
        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
		
			<a class="nav nav-next" href="/basics/" title="index" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1660740813"></script>
    <script src="/js/perfect-scrollbar.min.js?1660740813"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1660740813"></script>
    <script src="/js/jquery.sticky.js?1660740813"></script>
    <script src="/js/featherlight.min.js?1660740813"></script>
    <script src="/js/highlight.pack.js?1660740813"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1660740813"></script>
    <script src="/js/learn.js?1660740813"></script>
    <script src="/js/hugo-learn.js?1660740813"></script>
    
        
            <script src="/mermaid/mermaid.js?1660740813"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-106954497-2', 'auto');
  ga('send', 'pageview');
</script>
<center>
    <p>Built with <i class="fa fa-heart"></i> by <a href="http://control-plane.io" style="color: black"><strong>control</strong>plane</a></p>
</center>

  


<div class="autocomplete-suggestions "></div></body></html>